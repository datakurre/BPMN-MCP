<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.44.0">
  <bpmn:process id="Process_Event_Subprocess_Example" name="Event Subprocess Example" isExecutable="true" camunda:historyTimeToLive="P180D">
    <bpmn:startEvent id="StartEvent_OrderReceived" name="Order Received">
      <bpmn:outgoing>Flow_OrderReceived_to_ProcessOrder</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_OrderReceived_to_ProcessOrder" sourceRef="StartEvent_OrderReceived" targetRef="UserTask_ProcessOrder" />
    <bpmn:userTask id="UserTask_ProcessOrder" name="Process Order">
      <bpmn:incoming>Flow_OrderReceived_to_ProcessOrder</bpmn:incoming>
      <bpmn:outgoing>Flow_ProcessOrder_to_ShipOrder</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_ProcessOrder_to_ShipOrder" sourceRef="UserTask_ProcessOrder" targetRef="ServiceTask_ShipOrder" />
    <bpmn:serviceTask id="ServiceTask_ShipOrder" name="Ship Order" camunda:asyncBefore="true" camunda:type="external" camunda:topic="shipping">
      <bpmn:incoming>Flow_ProcessOrder_to_ShipOrder</bpmn:incoming>
      <bpmn:outgoing>Flow_ShipOrder_to_OrderCompleted</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_ShipOrder_to_OrderCompleted" sourceRef="ServiceTask_ShipOrder" targetRef="EndEvent_OrderCompleted" />
    <bpmn:endEvent id="EndEvent_OrderCompleted" name="Order Completed">
      <bpmn:incoming>Flow_ShipOrder_to_OrderCompleted</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:subProcess id="SubProcess_HandleCancellation" name="Handle Cancellation" triggeredByEvent="true">
      <bpmn:startEvent id="StartEvent_CancellationRequested" name="Cancellation Requested">
        <bpmn:outgoing>Flow_CancellationRequested_to_ConfirmCancellation</bpmn:outgoing>
        <bpmn:messageEventDefinition messageRef="Message_Cancellation" />
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_CancellationRequested_to_ConfirmCancellation" sourceRef="StartEvent_CancellationRequested" targetRef="UserTask_ConfirmCancellation" />
      <bpmn:userTask id="UserTask_ConfirmCancellation" name="Confirm Cancellation" camunda:candidateGroups="support">
        <bpmn:incoming>Flow_CancellationRequested_to_ConfirmCancellation</bpmn:incoming>
        <bpmn:outgoing>Flow_ConfirmCancellation_to_OrderCancelled</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_ConfirmCancellation_to_OrderCancelled" sourceRef="UserTask_ConfirmCancellation" targetRef="EndEvent_OrderCancelled" />
      <bpmn:endEvent id="EndEvent_OrderCancelled" name="Order Cancelled">
        <bpmn:incoming>Flow_ConfirmCancellation_to_OrderCancelled</bpmn:incoming>
        <bpmn:terminateEventDefinition />
      </bpmn:endEvent>
    </bpmn:subProcess>
    <bpmn:subProcess id="SubProcess_MonitorProgress" name="Monitor Progress" triggeredByEvent="true">
      <bpmn:startEvent id="StartEvent_EveryHour" name="Every Hour" isInterrupting="false">
        <bpmn:outgoing>Flow_EveryHour_to_SendStatusUpdate</bpmn:outgoing>
        <bpmn:timerEventDefinition>
          <bpmn:timeCycle xsi:type="bpmn:tFormalExpression">R/PT1H</bpmn:timeCycle>
        </bpmn:timerEventDefinition>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_EveryHour_to_SendStatusUpdate" sourceRef="StartEvent_EveryHour" targetRef="ServiceTask_SendStatusUpdate" />
      <bpmn:serviceTask id="ServiceTask_SendStatusUpdate" name="Send Status Update" camunda:asyncBefore="true" camunda:type="external" camunda:topic="status-update">
        <bpmn:incoming>Flow_EveryHour_to_SendStatusUpdate</bpmn:incoming>
        <bpmn:outgoing>Flow_SendStatusUpdate_to_StatusSent</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="Flow_SendStatusUpdate_to_StatusSent" sourceRef="ServiceTask_SendStatusUpdate" targetRef="EndEvent_StatusSent" />
      <bpmn:endEvent id="EndEvent_StatusSent" name="Status Sent">
        <bpmn:incoming>Flow_SendStatusUpdate_to_StatusSent</bpmn:incoming>
      </bpmn:endEvent>
    </bpmn:subProcess>
  </bpmn:process>
  <bpmn:message id="Message_Cancellation" name="Order Cancellation Request" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_Event_Subprocess_Example">
      <bpmndi:BPMNShape id="StartEvent_OrderReceived_di" bpmnElement="StartEvent_OrderReceived">
        <dc:Bounds x="152" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="131" y="145" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_ProcessOrder_di" bpmnElement="UserTask_ProcessOrder">
        <dc:Bounds x="240" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_ShipOrder_di" bpmnElement="ServiceTask_ShipOrder">
        <dc:Bounds x="390" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_OrderCompleted_di" bpmnElement="EndEvent_OrderCompleted">
        <dc:Bounds x="542" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="518" y="145" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_HandleCancellation_di" bpmnElement="SubProcess_HandleCancellation" isExpanded="true">
        <dc:Bounds x="120" y="190" width="490" height="150" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_CancellationRequested_di" bpmnElement="StartEvent_CancellationRequested">
        <dc:Bounds x="152" y="242" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="140" y="285" width="61" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_ConfirmCancellation_di" bpmnElement="UserTask_ConfirmCancellation">
        <dc:Bounds x="240" y="220" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_OrderCancelled_di" bpmnElement="EndEvent_OrderCancelled">
        <dc:Bounds x="542" y="242" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="520" y="285" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_CancellationRequested_to_ConfirmCancellation_di" bpmnElement="Flow_CancellationRequested_to_ConfirmCancellation">
        <di:waypoint x="188" y="260" />
        <di:waypoint x="240" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ConfirmCancellation_to_OrderCancelled_di" bpmnElement="Flow_ConfirmCancellation_to_OrderCancelled">
        <di:waypoint x="340" y="260" />
        <di:waypoint x="542" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="SubProcess_MonitorProgress_di" bpmnElement="SubProcess_MonitorProgress" isExpanded="true">
        <dc:Bounds x="120" y="370" width="490" height="150" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_EveryHour_di" bpmnElement="StartEvent_EveryHour">
        <dc:Bounds x="152" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="142" y="465" width="56" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_SendStatusUpdate_di" bpmnElement="ServiceTask_SendStatusUpdate">
        <dc:Bounds x="240" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_StatusSent_di" bpmnElement="EndEvent_StatusSent">
        <dc:Bounds x="542" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="532" y="465" width="58" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_EveryHour_to_SendStatusUpdate_di" bpmnElement="Flow_EveryHour_to_SendStatusUpdate">
        <di:waypoint x="188" y="440" />
        <di:waypoint x="240" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_SendStatusUpdate_to_StatusSent_di" bpmnElement="Flow_SendStatusUpdate_to_StatusSent">
        <di:waypoint x="340" y="440" />
        <di:waypoint x="542" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_OrderReceived_to_ProcessOrder_di" bpmnElement="Flow_OrderReceived_to_ProcessOrder">
        <di:waypoint x="188" y="120" />
        <di:waypoint x="240" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ProcessOrder_to_ShipOrder_di" bpmnElement="Flow_ProcessOrder_to_ShipOrder">
        <di:waypoint x="340" y="120" />
        <di:waypoint x="390" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ShipOrder_to_OrderCompleted_di" bpmnElement="Flow_ShipOrder_to_OrderCompleted">
        <di:waypoint x="490" y="120" />
        <di:waypoint x="542" y="120" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
